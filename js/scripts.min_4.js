var wppizzaCartJson={},wppizzaUpdateCart=function(){},wppizzaTotalsBefore=function(){},wppizzaTotals=function(){},wppizzaRestoreOrder=function(){},wppizzaPrepareOrder=function(){},wppizzaPrettifyJsAlerts=function(){};jQuery(document).ready(function(c){wppizza.shopOpen=-1,void 0===wppizza.usingCache&&(wppizza.shopOpen=0<c(".wppizza-open").length);function l(i){wppizzaCartJson=0<c("#wppizza-cart-json").length&&"empty"!==i?JSON.parse(c("#wppizza-cart-json").val()):{}}l("ini");var r=0<c(".wppizza-cart").length||0<c(".wppizza-cart-novis").length||0<c(".wppizza-totals").length||0<c("#wppizza-minicart").length,t=0<c(".wppizza-login-form").length,n=void 0!==wppizza.isCheckout,a=void 0!==wppizza.reCalc,s=void 0!==wppizza.cfrm,z=!1,u=void 0!==wppizza.pjsa,o=void 0!==wppizza.fpt,w=!1,m="wppizza-send-order",v=!1;wppizza.ajaxStart_count=0,c(document).ajaxStart(function(){wppizza.ajaxStart_count++}),wppizza.spinner_count=0,c(document).ajaxStop(function(){0==wppizza.spinner_count&&J("complete"),z||_()}),c(document).ajaxComplete(function(i,t,a){B()}),c(document).ajaxError(function(i,t,a,e){console.log("error :"),console.log(e),console.log(a),console.log(t.responseText),_()}),c(document).ajaxStop(function(){w&&(C(wppizza.funcCartRefr,w),w=!1)}),wppizzaPrettifyJsAlerts=function(i,t){var a=(a=(new DOMParser).parseFromString(wppizza.pjsa.h1,"text/html")).documentElement.textContent,e=wppizza.pjsa.ok;d=document,d.getElementById("wppizzaJsAlert")||(mObj=d.getElementsByTagName("body")[0].appendChild(d.createElement("div")),mObj.id="wppizzaJsAlert",mObj.style.height=d.documentElement.scrollHeight+"px",alertObj=mObj.appendChild(d.createElement("div")),alertObj.id="wppizzaAlertBox",d.all&&!window.opera&&(alertObj.style.top=document.documentElement.scrollTop+"px"),alertObj.style.left=(d.documentElement.scrollWidth-alertObj.offsetWidth)/2+"px",alertObj.style.visiblity="visible",h1=alertObj.appendChild(d.createElement("div")),h1.id="wppizzaAlertTitle",h1.appendChild(d.createTextNode(a)),msg=alertObj.appendChild(d.createElement("p")),msg.innerHTML=i,btn_wrap=alertObj.appendChild(d.createElement("div")),btn_wrap.id="btnWrap",btn_ok=btn_wrap.appendChild(d.createElement("button")),btn_ok.id="wppizzaAlertOk",btn_ok.innerHTML=e,btn_ok.onclick=function(){return p(!0),!1},alertObj.style.display="block")};var p=function(i){document.getElementsByTagName("body")[0].removeChild(document.getElementById("wppizzaJsAlert"))};wppizzaRestoreOrder=function(){_(),c(".wppizza-ordernow, #wppizza-ordernow").attr("disabled",!1)};function f(i,t){void 0===i&&(i=!1),void 0===t&&(t=!1),n?i||(c("html").css({position:"relative"}),c("body").prepend('<div class="wppizza-loading"></div>'),c(".wppizza-ordernow").attr("disabled","true")):i&&t?i.prepend('<div class="'+t+'"></div>'):c(".wppizza-cart").prepend('<div class="wppizza-loading"></div>')}function h(i){if(void 0!==i&&!1!==i)return e=i.toLowerCase();var t=c('input[type="hidden"][name="wppizza_gateway_selected"]'),a=c('input[type="radio"][name="wppizza_gateway_selected"]:checked'),i=c('select[name="wppizza_gateway_selected"] option:selected'),e="";return 0<t.length?e=t.val().toLowerCase():0<a.length?e=a.val().toLowerCase():0<i.length&&(e=i.val().toLowerCase()),e}function g(){return-1!==wppizza.shopOpen&&(!(!wppizza.shopOpen&&r)||(u?wppizzaPrettifyJsAlerts(wppizza.msg.closed,"alert"):alert(wppizza.msg.closed),!1))}var _=function(i,t){void 0===i&&(i=!1),void 0===t&&(t=!1),i&&t?i.find("."+t).remove():0<(t=c(".wppizza-loading")).length&&c.each(t,function(i,t){c(this).remove()})},y=h(!(wppizzaPrepareOrder=function(i){var t=c("#wppizza-send-order").serialize();jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"prepareorder",gateway_selected:i,data:t}},function(i){if(void 0!==i.error){var a=[],e=[];c.each(i.error,function(i,t){a[i]=t.error_id,e[i]=t.error_message});i="ERROR: "+a.join("|")+"\n";return i+=""+e.join("\n"),void(u?wppizzaPrettifyJsAlerts(i,"alert"):alert(i))}w=!1},"json")}));if(n&&window.performance&&2===window.performance.navigation.type)return f(),void window.location.reload(!0);wppizzaUpdateCart=function(i){if(f(),void 0!==i.markup&&void 0!==i.markup&&void 0!==i.markup)return k(i.markup),wppizza.shopOpen=i.is_open,void(w=i.cart);jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"loadcart",isCheckout:n}},function(i){k(i.markup),wppizza.shopOpen=i.is_open,w=i.cart,l("loadcart")},"json")};function e(i){"refresh"==i&&f(),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"loadcart",isCheckout:n}},function(i){k(i.markup),wppizza.shopOpen=i.is_open,w=i.cart,l("update_cart")},"json")}var k=function(p){var i=c(".wppizza-cart");c.each(i,function(i,t){var a=c(this).attr("id"),e=a.split("-").pop(-1);e<=0||""==e?c(this).html(p):(c(this).html(p),c("#"+a+" .wppizza-order-itemised > tbody").css({height:e+"px","min-height":e+"px","max-height":e+"px"}))})};r&&(void 0!==wppizza.usingCache&&e("load"),c(document).on("click",".wppizza-cart-refresh",function(i){e("refresh")}));function j(t,a){if(0<t.length)for(i=0;i<t.length;i++)new Function("term","return "+t[i]+"(term);")(a)}var b,C=function(t,a){if(0<t.length)for(i=0;i<t.length;i++)new Function("term","return "+t[i]+"(term);")(a);J("refresh"),wppizza.spinner_count++};0<c(".wppizza-totals-container").length&&(Q=c(".wppizza-totals-viewcart, .wppizza-totals-viewcart-button"),b=c(".wppizza-totals-cart"),0<Q.length&&(c(document).on("click",".wppizza-totals-container>.dashicons-cart, .wppizza-totals-viewcart-button",function(i){c(this).closest("div").find(".wppizza-totals-cart").fadeToggle()}),c("html").click(function(i){i=c(i.target);if(!i.is("#wppizza-minicart .ui-spinner-input, #wppizza-minicart .ui-spinner-button, #wppizza-minicart .ui-icon")){if(i.is(".wppizza-totals-container>.dashicons-cart, .wppizza-totals-viewcart-button>input"))if(i.closest("div").find(".wppizza-totals-cart").is(":visible"))return;b.is(":visible")&&b.fadeOut()}})),(wppizzaTotalsBefore=function(i){void 0===i&&(i=!1);var t=c(".wppizza-totals-container");!0!==i&&f(t,"wppizza-loading-small")})(!0),(wppizzaTotals=function(i){void 0===i&&(i=!1);var t=c(".wppizza-totals-container"),a=c(".wppizza-totals-order"),e=c(".wppizza-totals-items"),o=c(".wppizza-totals-itemcount"),r=c(".wppizza-totals-checkout-button"),n=c(".wppizza-totals-viewcart"),s=c(".wppizza-totals-viewcart-button"),z=c(".wppizza-totals-emptycart-button"),d=c(".wppizza-totals-cart");c(".wppizza-totals-cart-items"),c(".wppizza-totals-cart-summary");jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"gettotals"}},function(p){T.length<=0&&0<x.length&&(void 0!==p.get_cart_json?0<c("#wppizza-minicart > #wppizza-cart-json").length?(c("#wppizza-minicart > #wppizza-cart-json").replaceWith(p.get_cart_json),l("minicart-update")):(x.prepend(p.get_cart_json),l("minicart-ini")):(c("#wppizza-minicart > #wppizza-cart-json").empty().remove(),l("minicart-empty"))),0<p.no_of_items?(t.removeClass("wppizza-totals-no-items"),t.addClass("wppizza-totals-has-items")):(t.removeClass("wppizza-totals-has-items"),t.addClass("wppizza-totals-no-items")),0<d.length&&0<n.length&&(n.hasClass("dashicons-cart")||n.addClass("dashicons dashicons-cart"),""!=p.cart_empty?n.hide():n.show()),p.is_open&&(wppizza.shopOpen=!0),0<s.length&&s.html(p.view_cart_button),0<a.length&&a.html(p.total),0<e.length&&e.html(p.total_price_items),0<o.length&&o.html(p.itemcount),0<r.length&&r.html(p.checkout_button),0<o.length&&z.html(p.emptycart_button),0<d.length&&c.each(d,function(i,t){var a=c(this),e="";a.hasClass("wppizza-totals-cart-items")&&(e+=p.items),a.hasClass("wppizza-totals-cart-summary")&&(e+=p.summary),void 0!==p.minimum_order&&(e+=p.minimum_order),a.html(e),v&&J("minicart-cart_markup")}),!0!==i&&_(t,"wppizza-loading-small"),v=!(w=!1)},"json")})(!0));var O,x=c("#wppizza-minicart"),T=c(".wppizza-cart");0<x.length&&(function(){void 0!==wppizza.crt.mElm&&x.prependTo(""+wppizza.crt.mElm);var i,t,a,e,p=wppizza.crt.mCartPadTop;void 0!==wppizza.crt.mPadTop&&0<wppizza.crt.mPadTop&&(p=wppizza.crt.mPadTop,(i=void 0!==wppizza.crt.mPadElm?c(""+wppizza.crt.mPadElm):c("body")).css({"padding-top":"+="+wppizza.crt.mPadTop+"px"})),void 0===wppizza.crt.mStatic&&(t=c(window),a=!0,setTimeout(function(){O(t,x,T,p,i),a=!1},500),t.scroll(function(){a||(clearTimeout(e),e=setTimeout(function(){O(t,x,T,p,i)},300))}),t.resize(function(){a||(clearTimeout(e),e=setTimeout(function(){O(t,x,T,p,i)},300))}))}(),O=function(i,t,a,e,p){var o,r,n=i.width();void 0!==wppizza.crt.mMaxWidth&&(o=wppizza.crt.mMaxWidth),void 0!==o&&o<n||void 0!==wppizza.isCheckout?t.is(":visible")&&t.fadeOut(250):((r=!(0<a.length)||(i=(n=i.scrollTop())+i.height(),(r=a.offset().top)+a.height()<=n||i<=r))&&t.is(":hidden")&&(void 0!==p&&p.animate({"padding-top":"+="+e+"px"},250),t.fadeIn(250)),!r&&t.is(":visible")&&(void 0!==p&&p.animate({"padding-top":"-="+e+"px"},250),t.fadeOut(250)))}),c(document).on("click",".wppizza-reorder-purchase",function(i){var t;i.preventDefault(),i.stopPropagation(),g()&&r&&(f(),t=c(this).attr("id"),j(wppizza.funcBeforeCartRefr,i),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"reorder",id:t,isCheckout:n}},function(i){void 0!==i.invalid&&console.log(i.invalid),void 0!==i.markup&&k(i.markup),w=i.cart,l("update_cart")},"json"))}),c(document).on("click",".wppizza-add-to-cart, .wppizza-add-to-cart-select",function(i){var t,a,e,p,o;return i.preventDefault(),i.stopPropagation(),!!g()&&void(r&&(f(),o=(t=c(this)).attr("id"),void 0===wppizza.itm||void 0===wppizza.itm.fbatc||t.hasClass("wppizza-add-to-cart-btn")||(a=!0,e=t.html(),(p=t).hasClass("wppizza-do-reorder")&&(p=t.closest("td"),e=p.html(),a=!1),a&&t.removeClass("wppizza-add-to-cart"),t.fadeOut(100,function(){p.html("<div class='wppizza-item-added-feedback'>"+wppizza.itm.fbatc+"</div>").fadeIn(400).delay(wppizza.itm.fbatcms).fadeOut(400,function(){p.html(e).fadeIn(100),a&&t.addClass("wppizza-add-to-cart")})})),t.hasClass("wppizza-add-to-cart-select")&&(o=o.split("_").pop(-1)+"-"+t.closest("span").find("select").val()),j(wppizza.funcBeforeCartRefr,i),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"add",id:o,isCheckout:n}},function(i){void 0!==i.invalid&&console.log(i.invalid),void 0!==i.markup&&(k(i.markup),wppizza.shopOpen=i.is_open,setTimeout(g,10)),n&&void 0!==i.page_markup&&c(".wppizza-order-wrap").replaceWith(i.page_markup),w=i.cart,l("add")},"json")))}),c(document).on("click",".wppizza-remove-from-cart, .wppizza-delete-from-cart",function(i){i.preventDefault(),i.stopPropagation(),f();var t=c(this),a=t.attr("id");a.split("-").pop(-1);t=t.hasClass("wppizza-delete-from-cart")?0:-1,j(wppizza.funcBeforeCartRefr,i),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"modify",id:a,quantity:t,isCheckout:n}},function(i){void 0!==i.invalid&&console.log(i.invalid),void 0!==i.cart_markup&&(k(i.cart_markup),wppizza.shopOpen=i.is_open,setTimeout(g,10)),n&&void 0!==i.page_markup&&(c(".wppizza-order-wrap").replaceWith(i.page_markup),_()),w=i.cart,l("modify")},"json")}),c(document).on("keyup",".wppizza-cart-mod, .wppizza-item-qupdate",function(i){this.value=this.value.replace(/[^0-9]/g,"")});c(document).on("focus",".wppizza-cart-mod, .wppizza-item-qupdate",function(i){this.value.replace(/[^0-9]/g,"")}),c(document).on("blur",".wppizza-cart-mod, .wppizza-item-qupdate",function(i){this.value=this.value.replace(/[^0-9]/g,"")}),c(document).on("click",".wppizza-trigger-choose",function(i){wppizza.shopOpen&&r&&(u?wppizzaPrettifyJsAlerts(wppizza.msg.choosesize,"alert"):alert(wppizza.msg.choosesize))}),c(document).on("click",".wppizza-trigger-click",function(i){var t;wppizza.shopOpen&&r&&(t=(t=(t=this.id.split("-")).splice(2)).join("-"),target=c("#wppizza-"+t),target.trigger("click"))}),c(document).on("click",".wppizza-empty-cart-button",function(i){i.preventDefault(),i.stopPropagation(),f(),j(wppizza.funcBeforeCartRefr,i),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"empty",isCheckout:n}},function(i){void 0!==i.invalid&&console.log(i.invalid),void 0!==i.cart_markup&&(k(i.cart_markup),wppizza.shopOpen=i.is_open,setTimeout(g,10)),n&&void 0!==i.page_markup&&c(".wppizza-order-wrap").replaceWith(i.page_markup),w=i.cart,l("empty")},"json")});function P(i,t){var a=c('input[type="checkbox"][name="wppizza-order-pickup"]'),e=c(".wppizza-toggle-pickup"),p=c(".wppizza-toggle-delivery"),o=e.closest("label"),r=p.closest("label");!0===i&&(a.attr("disabled",!0),e.attr("disabled",!0),p.attr("disabled",!0)),!1===i&&(a.attr("disabled",!1),e.attr("disabled",!1),p.attr("disabled",!1)),!0===t&&(a.prop("checked",!1),e.prop("checked",!0),p.prop("checked",!1),o.addClass("wppizza-pickup-toggle-selected"),r.removeClass("wppizza-pickup-toggle-selected")),!1===t&&(a.prop("checked",!0),e.prop("checked",!1),p.prop("checked",!0),o.removeClass("wppizza-pickup-toggle-selected"),r.addClass("wppizza-pickup-toggle-selected"))}c(document).on("change",".wppizza-order-pickup",function(i){if(!o&&!g())return;if(r||o){var t,a=c(this),e=c("#wppizza-send-order").serialize(),p=void 0!==wppizza.opt&&void 0!==wppizza.opt.puDef;a.is(":radio")?t=1==a.val():(t=!!a.is(":checked"),p&&(t=!a.is(":checked")));a=p!==t?!0:!1;if(P(!0,null),P(null,!!t),void 0!==wppizza.opt&&void 0!==wppizza.opt.puAlrt&&1==a&&(1==wppizza.opt.puAlrt&&(u?wppizzaPrettifyJsAlerts(wppizza.msg.pickup,"alert"):alert(wppizza.msg.pickup)),2==wppizza.opt.puAlrt&&!confirm(wppizza.msg.pickup)))return P(null,!(p&&t||!p&&t)),void P(!1,null);j(wppizza.funcBeforeCartRefr,i),f(),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"order-pickup",value:t,data:e,isCheckout:n}},function(i){return n?(window.location.reload(!0),void(z=!0)):(void 0!==i.cart_markup&&(k(i.cart_markup),wppizza.shopOpen=i.is_open,o||setTimeout(g,10)),n&&void 0!==i.page_markup&&c(".wppizza-order-wrap").replaceWith(i.page_markup),c(".wppizza-orders-pickup-choice").replaceWith(i.cart_pickup_select),w=i.cart,void l("pickup-toggle"))},"json")}});var E=0,J=function(i){if(void 0!==wppizza.ofqc){var t="";n&&(t+=".wppizza-item-qupdate, ");var a,e,t=c(t+=".wppizza-cart-mod");if(t.spinner({min:0}),"load"==i&&0<wppizza.ajaxStart_count)return!1;t.focus(function(i){return i.preventDefault(),E=0,a=c(this).val(),spinner_element_id=c(this).attr("id").split("-").pop(-1),c(this).on("DOMMouseScroll mousewheel",function(i){return 0<i.originalEvent.detail||i.originalEvent.wheelDelta<0?0<parseInt(this.value)&&(this.value=parseInt(this.value,10)-1):this.value=parseInt(this.value,10)+1,!1}),!1}),t.keydown(function(i){if(e=c(this).val(),13==i.which||35==i.which)return c(this).blur(),!1}),t.blur(function(i){return e=c(this).val(),i.preventDefault(),i.stopPropagation(),0==E&&(a!=e&&c(this).change(),E++),!1})}};c(document).on("change",".wppizza-cart-mod, .wppizza-item-qupdate",function(i){i.preventDefault(),i.stopPropagation();var t=c(this),i=t.attr("id").split("-").pop(-1),t=t.val();D(t,i)}),c(document).on("click",".wppizza-item-quantity > span > a.ui-spinner-up, .wppizza-item-quantity > span > a.ui-spinner-down",function(i){i.preventDefault(),i.stopPropagation(),c(this).closest("span").find(".wppizza-cart-mod").blur()});var B=function(){n&&c("#"+m).validate({rules:wppizza.validate.rules,errorElement:"div",errorClass:"wppizza-validation-error error",ignore:":hidden, :disabled, .wppizza-ignore, .ignore",errorPlacement:function(i,t){t=t.closest("div");i.appendTo(t)},invalidHandler:function(i,t){var a,e,p;t.numberOfInvalids()&&(a=c(t.errorList[0].element),t=(e=(p=c(window)).scrollTop())+p.height(),(p=a.offset().top)+a.height()<=t&&e<=p||c("html, body").animate({scrollTop:a.offset().top-50},300))},submitHandler:function(i,t){return c("#wppizza-ordernow").attr("disabled","true"),f(),q(),!1}})};J("load");var Q,S,A,D=function(i,t,a){if(void 0!==a&&!0===a)return window.location.reload(!0),void(z=!0);void 0!==t&&(f(),a=c(".wppizza-totals-container"),f(a,"wppizza-loading-small"),a="",n&&(a=c("#wppizza-send-order").serialize()),j(wppizza.funcBeforeCartRefr,"update"),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"update-order",id:t,quantity:i,isCheckout:n,data:a}},function(i){void 0!==i.invalid&&console.log(i.invalid),void 0!==i.cart_markup&&(k(i.cart_markup),wppizza.shopOpen=i.is_open,setTimeout(g,10)),void 0!==i.page_markup&&(c(".wppizza-order-wrap").replaceWith(i.page_markup),_()),w=i.cart,l("update-order")},"json"))};n&&(c("body").hasClass("wppizza-checkout")||c("body").addClass("wppizza-checkout"),B(),jQuery.extend(jQuery.validator.messages,{required:wppizza.validate.error.required,email:wppizza.validate.error.email,decimal:wppizza.validate.error.decimal}),c.validator.methods.decimal=function(i,t){return this.optional(t)||/^(?:\d+|\d{1,3}(?:[\s\.,]\d{3})+)(?:[\.,]\d+)?$/.test(i)},c(document).on("change","#ctips_pc",function(i){var t=0;void 0!==wppizzaCartJson.summary.total.total&&(t=wppizzaCartJson.summary.total.total),void 0!==wppizzaCartJson.summary.tips.tips&&0<t&&(t-=wppizzaCartJson.summary.tips.tips);var a=void 0!==wppizzaCartJson.currency.decimals?wppizzaCartJson.currency.decimals:2,t=(t=""==c(this).val()||0==c(this).val()?0:t*(c(this).val()/100)).toFixed(a);c("#ctips").val(t).trigger("blur")}),c(document).on("keyup","#ctips",function(i){var t;8==i.which||35<=i.which&&i.which<=40||(i=(t=c(this)).val(),validate=i.replace(/[^0-9\.,]+/g,""),t.val(validate))}),Q=c("#ctips"),S=c("#ctips_pc"),A=Q.val(),c(document).on("focus","#ctips",function(i){A=c(this).val(),0<S.length&&c("#ctips_pc").val("")}),c(document).on("keydown","#ctips",function(i){if(13==event.which||35==event.which)return event.preventDefault(),c(this).blur(),!1}),c(document).on("blur","#ctips",function(i){return W(A),!1}));function R(){var i=h(!1);""!=i&&(i="wppizza_"+i+"_init","function"==typeof(i=window[i])&&i())}var W=function(i){var t=c(this);i!=c("#ctips").val()&&(i=c("#wppizza-send-order").serialize(),t.attr("disabled","true"),f(),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"addtips",data:i,isCheckout:n}},function(i){void 0!==i.cart_markup&&(k(i.cart_markup),wppizza.shopOpen=i.is_open,setTimeout(g,10)),n&&void 0!==i.page_markup&&(c(".wppizza-order-wrap").replaceWith(i.page_markup),_()),w=i.cart,l("tips")},"json"))};s||R();var q=function(){var t=document.getElementById(m),a=s;c("#"+t.id).hasClass("wppizza-order-confirmed")&&(a=!1);var e=!!c("#"+t.id).hasClass("wppizza-order-confirmed"),p=c(t).serialize();if(void 0!==wppizza.fnBeforeOrderSubmit&&0<wppizza.fnBeforeOrderSubmit.length){var o=!0,r=[];for(i=0;i<wppizza.fnBeforeOrderSubmit.length;i++){var n=new Function("formid, data, must_confirm, is_confirmation_page","return "+wppizza.fnBeforeOrderSubmit[i]+"(formid, data, must_confirm, is_confirmation_page);")(t.id,p,a,e);r.push(n)}c.when.apply(c,r).then(function(i){return c.each(r,function(i,t){if(void 0!==t.responseJSON._wppizza_verify_on_submit&&void 0!==t.responseJSON._wppizza_verify_on_submit.continue&&!1===t.responseJSON._wppizza_verify_on_submit.continue)return o=t.responseJSON._wppizza_verify_on_submit,!1}),o}).done(function(i){I(i,p,t,a,e)})}else I(!0,p,t,a,e)},I=function(i,t,a,e,p){var o=c(".wppizza-order-wrap");if(void 0===i||void 0===i.continue||!1!==i.continue){if(e)jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"confirmorder",data:t}},function(i){o.replaceWith(i.markup).promise().done(function(i){R()});i=c("#wppizza-send-order").offset().top;c("html, body").animate({scrollTop:i-100},300),w=!1},"json");else if(!e){var r=h(!1);if(""==r)return console.log("no payment method selected"),!1;if(r!=y)return console.log("payment method mismatch ["+r+"#"+y+"]"),!1;e="wppizza_"+r+"_payment";if("function"==typeof(e=window[e]))return"undefined"!=typeof event&&event.stopPropagation(),z=!0,e(a.id,t,event),!1;jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"submitorder",gateway_selected:r,wppizza_data:t}},function(i){if(void 0===i.error)return void 0!==i.output?(console.log(i),void o.replaceWith(i.output)):void 0!==i.gateway?void 0!==i.gateway.form?(z=!0,void c(i.gateway.form).appendTo("body").submit()):void 0!==i.gateway.redirect?(z=!0,void(window.location.href=i.gateway.redirect)):void 0:void 0!==i.redirect_url?(z=!0,void(window.location.href=i.redirect_url)):void(w=!1);var a=[],e=[];c.each(i.error,function(i,t){a[i]=t.error_id,e[i]=t.error_message});i='<div id="wppizza-order-error" class="wppizza-error">ERROR: '+a.join("|")+"<br /><br /></div>";return i+='<div id="wppizza-order-error-details" class="wppizza-error-details"><ul><li>'+e.join("</li><li>")+"</li></ul></div>",o.replaceWith(i),c("html,body").animate({scrollTop:0},300),void _()},"json")}}else{t=void 0!==i.alert&&""!=i.alert&&i.alert,i=void 0!==i.element_id&&""!=i.element_id&&i.element_id;if(!p)return!1!==t&&(u?(t="<center>"+t.replace(/\./g,".<br>")+"</center>",wppizzaPrettifyJsAlerts(t,"invalid")):(t=""+t.replace(/\./g,"\n"),alert(t))),!1!==i&&N(i),void wppizzaRestoreOrder();if(p){c(".wppizza-loading").addClass("wppizza-load-redirect").removeClass("wppizza-loading"),!1!==t&&(t=""+t.replace(/\./g,"\n"),alert(t));t=location.href.replace(location.hash,"");return!1!==i&&(t+="#"+i),window.location.href=t,void window.location.reload(!0)}}};a&&c(document).on("change",'input[name="wppizza_gateway_selected"]:radio, select[name="wppizza_gateway_selected"]',function(i){f();var t=c(this).val(),a=c("#wppizza-send-order").serialize();jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"changegateway",data:a,gateway_selected:t,isCheckout:n}},function(i){window.location.reload(!0),z=!0},"json")});var N=function(i){!n||""!=(i=i||window.location.hash.substring(1))&&0<c("#"+i).length&&c("html, body").animate({scrollTop:c("#"+i).offset().top-100},1e3)};N(!1),c(document).on("change",".wppizza_account",function(i){c("#wppizza-user-register-info").toggle(200)}),c(document).on("click",".wppizza-login-show, .wppizza-login-cancel",function(i){i.preventDefault(),i.stopPropagation(),c(".wppizza-login-fieldset").slideToggle(300),c(".wppizza-login-option>a").toggle()}),t&&c(".wppizza-login-form > form ").validate({rules:{log:{required:!0},pwd:{required:!0}},errorElement:"div",errorClass:"wppizza-validation-error error",errorPlacement:function(i,t){t=t.closest("p");i.appendTo(t)}}),c(document).on("click",".wppizza-login-form #wp-submit",function(i){i.preventDefault(),i.stopPropagation();var t,a,e=c(this),p=e.closest("form");p.valid()&&(t=p.serialize(),i=e.css("width"),p=e.css("height"),a=c(".wppizza-login-info"),e.attr("disabled","true").val("").addClass("wppizza-wait").css({width:i,height:p}),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"user-login",data:t}},function(i){return void 0===i.error?(window.location.reload(!0),void(z=!0)):void 0!==i.error?(a.append(""+i.error).slideDown(250).delay(3500).slideUp(1e3,function(){a.empty()}),void e.removeAttr("disabled").val(i.button_value).removeClass("wppizza-wait")):void(w=!1)},"json"))}),c(document).on("click",".wppizza-transaction-details-orderhistory > legend",function(i){var t=c(this),a=t.closest("fieldset").find(".wppizza-order-details"),t=t.closest("fieldset").find(".wppizza-transaction-details");a.is(":visible")?(a.hide(),t.fadeIn()):(t.hide(),a.fadeIn())}),c(document).on("change",".wppizza-dd-categories > select",function(i){i.preventDefault(),i.stopPropagation();i=c(this).val();i<=0||(window.location.href=i)})});